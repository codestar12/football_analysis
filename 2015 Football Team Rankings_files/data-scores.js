define(["jquery","libs/debug","version!fly/components/base","version!fly/libs/underscore","libs/backbone.marionette"],function(u,e,a,n,t){e=e.init("dataScores");e.enable();e.log("dataScores");function o(e){if(typeof e.id!="undefined"){var a=window.saagData.games.get(e.id);if(typeof a!="undefined"){var n=filterSaagGameData(e,a);a.set(n)}}}processSAAGData=function(e,a){if(typeof window.saagData.games=="undefined"){initializeSaagGames()}if(a&&typeof e.games!="undefined"){var n=e.games.length;for(var t=0;t<n;++t){var i=e.games[t];o(i)}}else{if(!a&&typeof e.id!="undefined"){initializeSaagGameRegion(e);o(e)}}};initializeSaagGameRegion=function(e){var a=filterSaagGameData(e,null),n=new SaagGame(a);var t=e.id,i=null,o=null,s={saagTop:{target:"#top-game-"+t},saagLeague:{target:"#game-"+t}};for(i in s){o=s[i].target;if(u(o).length!==0){var r=i+t;if(typeof window.saagApp._regionManager.get(r)=="undefined"){var f=new SaagGameRegion({el:o});window.saagApp._regionManager.addRegion(r,f);var d=new SaagGameView({model:n});f.show(d);if(typeof window.saagData.games.get(t)=="undefined"){window.saagData.games.add(n)}}}}};initializeSaagGames=function(){window.saagData.games=new SaagGamesCollection};filterSaagGameData=function(e,a){var n={};for(var t in e){switch(t){case"id":case"abbr":case"label":case"status":case"scheduled_date_time":case"scheduled_epoch":case"enhanced":case"recap":case"preview":case"tv":case"cstvlink":case"tournament":n[t]=e[t];break;case"type":n["season_type"]=e[t];break;case"odds":var i=e[t];if(typeof i.current_total!="undefined"){n["odds_current_total"]=i.current_total}if(typeof i.current_spread!="undefined"){n["odds_current_spread"]=i.current_spread}if(typeof i.home_current_money!="undefined"){n["odds_home_current_money"]=i.home_current_money}break;case"awayteam":case"hometeam":var o=e[t];if(a!=null){if(typeof a.get(t)!="undefined"&&typeof n[t]=="undefined"){n[t]=a.get(t)}}if(typeof n[t]=="undefined"){n[t]={}}for(var s in o){n[t][s]=o[s]}break;case"game_status":var r=e[t];if(typeof r.time_remaining!="undefined"){n["time_remaining"]=r.time_remaining}if(typeof r.quarter!="undefined"){n["current_quarter"]=r.quarter}if(typeof r.period!="undefined"){n["current_period"]=r.period}if(typeof r.inning!="undefined"){n["current_inning"]=r.inning}if(typeof r.outs!="undefined"){n["current_outs"]=r.outs}if(typeof r.inning_status!="undefined"){n["inning_status"]=r.inning_status}if(typeof r.homescore!="undefined"){if(typeof r.homescore.total!="undefined"){if(a!=null){if(typeof a.get("homescore_total")!="undefined"){n["homescore_last_total"]=a.get("homescore_total")}}n["homescore_total"]=r.homescore.total}if(typeof r.homescore.runs!="undefined"){if(a!=null){if(typeof a.get("homescore_runs")!="undefined"){n["homescore_last_runs"]=a.get("homescore_runs")}}n["homescore_runs"]=r.homescore.runs}if(a!=null&&(typeof n["homescore_total"]!="undefined"||typeof n["homescore_runs"]!="undefined")){n["homescore_changed"]=true}}if(typeof r.awayscore!="undefined"){if(typeof r.awayscore.total!="undefined"){if(a!=null){if(typeof a.get("awayscore_total")!="undefined"){n["awayscore_last_total"]=a.get("awayscore_total")}}n["awayscore_total"]=r.awayscore.total}if(typeof r.awayscore.runs!="undefined"){if(a!=null){if(typeof a.get("awayscore_runs")!="undefined"){n["awayscore_last_runs"]=a.get("awayscore_runs")}}n["awayscore_runs"]=r.awayscore.runs}if(a!=null&&(typeof n["awayscore_total"]!="undefined"||typeof n["awayscore_runs"]!="undefined")){n["awayscore_changed"]=true}}if(typeof r.field_position!="undefined"){if(typeof r.field_position.team_in_possession!="undefined"){n["field_position_team_in_possession"]=r.field_position.team_in_possession}}if(typeof r.runners!="undefined"){if(typeof r.runners.on_base!="undefined"){n["runners_on_base"]=r.runners.on_base}}break}}return n};return null});